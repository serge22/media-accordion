(()=>{"use strict";var e,i={648:(e,i,a)=>{const t=window.wp.blocks,l=window.wp.i18n,d=window.wp.blockEditor,o=window.wp.components,s=window.wp.data,r=window.wp.element,n=window.wp.apiFetch;var c=a.n(n);const u=window.ReactJSXRuntime;function m({clientId:e}){const{selectedBlockId:i,itemBlocks:a}=(0,s.useSelect)(i=>{const{getBlock:a,getSelectedBlockClientId:t}=i("core/block-editor"),l=a(e);return{selectedBlockId:t(),itemBlocks:l?l.innerBlocks.filter(e=>"srg/media-accordion-item"===e.name):[]}},[e]);let t=a.find(e=>e.clientId===i&&e.attributes.mediaUrl);return t||(t=a.find(e=>e.attributes.mediaUrl)),t?t.attributes.mime&&t.attributes.mime.startsWith("video/")?(0,u.jsx)("video",{src:t.attributes.mediaUrl,controls:!0,style:{maxWidth:"100%",height:"auto"}},t.clientId):t.attributes.mime&&t.attributes.mime.startsWith("image/")?(0,u.jsx)("img",{src:t.attributes.mediaUrl,alt:"Media preview",style:{maxWidth:"100%",height:"auto"}},t.clientId):(0,u.jsx)("div",{style:{color:"#888"},children:"Unsupported media type"}):(0,u.jsx)("div",{style:{color:"#888"},children:"No media selected"})}const p=["srg/media-accordion-item"],f=[["srg/media-accordion-item"]],h=JSON.parse('{"UU":"srg/media-accordion"}');(0,t.registerBlockType)(h.UU,{edit:function({attributes:e,setAttributes:i,clientId:a}){const{insertBlock:n}=(0,s.useDispatch)("core/block-editor"),h=(0,r.useRef)(null),[g,v]=(0,r.useState)(null),{innerBlocks:y,selectedBlockClientId:x,imageSizes:_}=(0,s.useSelect)(e=>{const i=e("core/block-editor"),t=i.getBlocks(a),l=i.getSelectedBlock(),o=e(d.store).getSettings();let s=null;return l&&(t.some(e=>e.clientId===l.clientId)?s=l.clientId:t.forEach(e=>{i.getBlockParents(l.clientId).includes(e.clientId)&&(s=e.clientId)})),{innerBlocks:t,selectedBlockClientId:s,imageSizes:o?.imageSizes||[]}},[a]);return(0,r.useEffect)(()=>{if(0===y.length)return;let e;x?(e=x,h.current=x):h.current?e=h.current:(e=y[0].clientId,h.current=e),y.forEach(i=>{const a=document.querySelector(`[data-block="${i.clientId}"]`);a&&(i.clientId===e?a.classList.add("active"):a.classList.remove("active"))})},[y,x]),(0,r.useEffect)(()=>{e.uid||i({uid:`accordion-${a.substring(0,8)}`})},[e.uid,a,i]),(0,r.useEffect)(()=>{e.defaultMediaId&&"image"===e.defaultMediaType?c()({path:`/wp/v2/media/${e.defaultMediaId}`}).then(e=>{v(e)}).catch(e=>{console.error("Error fetching media details:",e)}):v(null)},[e.defaultMediaId,e.defaultMediaType]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(d.InspectorControls,{children:[(0,u.jsxs)(o.PanelBody,{title:(0,l.__)("Accordion Settings","media-accordion"),children:[(0,u.jsx)(o.ToggleControl,{label:(0,l.__)("Autoplay","media-accordion"),help:e.autoplay?(0,l.__)("Slides advance automatically","media-accordion"):(0,l.__)("Manual play only","media-accordion"),checked:!!e.autoplay,onChange:e=>i({autoplay:!!e})}),(0,u.jsx)(o.RadioControl,{label:(0,l.__)("Layout","media-accordion"),selected:e.layout||"layout-1",onChange:e=>i({layout:e}),options:[{label:(0,l.__)("Accordion","media-accordion"),value:"layout-1"},{label:(0,l.__)("List","media-accordion"),value:"layout-2"}]})]}),(0,u.jsxs)(o.PanelBody,{title:(0,l.__)("Default Media","media-accordion"),initialOpen:!1,children:[(0,u.jsx)("p",{style:{marginTop:0,fontSize:"12px",color:"#757575"},children:(0,l.__)("Set a default media to display when no accordion item is active. When autoplay is disabled and default media is set, the first item will not be active by default.","media-accordion")}),(0,u.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,u.jsx)(d.MediaUploadCheck,{children:(0,u.jsx)(d.MediaUpload,{onSelect:e=>{const a="image"===e.type;let t;a&&(t=e.sizes?.large?"large":"full");let l=e.url;a&&"full"!==t&&e.sizes?.[t]&&(l=e.sizes[t].url),i({defaultMediaId:e.id,defaultMediaUrl:l,defaultMediaType:e.type,defaultMediaSizeSlug:t}),a&&v(e)},allowedTypes:["image","video"],value:e.defaultMediaId,render:({open:i})=>(0,u.jsx)(o.Button,{variant:"secondary",onClick:i,style:{marginTop:"10px"},children:e.defaultMediaId?(0,l.__)("Replace Media","media-accordion"):(0,l.__)("Select Media","media-accordion")})})}),e.defaultMediaId&&(0,u.jsx)(o.Button,{variant:"secondary",isDestructive:!0,onClick:()=>{i({defaultMediaId:void 0,defaultMediaUrl:void 0,defaultMediaType:void 0,defaultMediaSizeSlug:void 0}),v(null)},style:{marginTop:"10px"},children:(0,l.__)("Remove Media","media-accordion")})]}),e.defaultMediaId&&e.defaultMediaUrl&&(0,u.jsxs)("div",{style:{marginTop:"15px",marginBottom:"15px"},children:[(0,u.jsx)("p",{style:{margin:"0 0 8px 0",fontWeight:"500"},children:(0,l.__)("Preview:","media-accordion")}),(0,u.jsx)("div",{style:{position:"relative",maxWidth:"100%"},children:"video"===e.defaultMediaType?(0,u.jsx)("video",{src:e.defaultMediaUrl,style:{maxWidth:"100%",height:"auto",display:"block"},controls:!0}):(0,u.jsx)("img",{src:e.defaultMediaUrl,alt:(0,l.__)("Default media","media-accordion"),style:{maxWidth:"100%",height:"auto",display:"block"}})})]}),e.defaultMediaId&&"image"===e.defaultMediaType&&(0,u.jsx)(o.SelectControl,{label:(0,l.__)("Image Resolution","media-accordion"),value:e.defaultMediaSizeSlug||"large",options:(()=>{if(!g||!g.media_details?.sizes)return[];const e=g.media_details.sizes,i=_.filter(i=>e[i.slug]||"full"===i.slug).map(e=>({label:e.name,value:e.slug}));return 0===i.length?[{label:(0,l.__)("Full Size","media-accordion"),value:"full"}]:i})(),onChange:async e=>{if(i({defaultMediaSizeSlug:e}),g){let a=g.source_url;"full"!==e&&g.media_details?.sizes?.[e]&&(a=g.media_details.sizes[e].source_url),i({defaultMediaUrl:a})}}})]}),(0,u.jsx)(d.PanelColorSettings,{title:(0,l.__)("Color Settings","media-accordion"),colorSettings:[{value:e.activeItemBgColor,onChange:e=>i({activeItemBgColor:e}),label:(0,l.__)("Active Item Background Color","media-accordion")}]})]}),(0,u.jsx)("div",{...(0,d.useBlockProps)({className:`is-${e.layout||"layout-1"}`,style:{"--active-item-bg-color":e.activeItemBgColor}}),children:(0,u.jsxs)("div",{style:{display:"flex",gap:"20px"},children:[(0,u.jsxs)("div",{style:{flex:"1"},children:[(0,u.jsx)(d.InnerBlocks,{allowedBlocks:p,template:f}),(0,u.jsx)(o.Button,{variant:"primary",onClick:()=>n((0,t.createBlock)("srg/media-accordion-item"),void 0,a),style:{marginTop:"1em"},children:(0,l.__)("Add Item","media-accordion")})]}),(0,u.jsx)("div",{style:{flex:1,minWidth:"300px",maxWidth:"500px"},children:(0,u.jsx)(m,{clientId:a})})]})})]})},save:function({attributes:e}){const i=d.useBlockProps.save({className:`${e.uid} is-${e.layout||"layout-1"}`,"data-autoplay":e.autoplay?"true":"false","data-has-default-media":e.defaultMediaId?"true":"false",style:e.activeItemBgColor?{"--active-item-bg-color":e.activeItemBgColor}:{}}),a=i.className.split(" ")[0];return(0,u.jsxs)("div",{...i,children:[(0,u.jsx)("div",{className:`${a}_content`,children:(0,u.jsx)("div",{className:`${a}_content-container`,children:(0,u.jsx)(d.InnerBlocks.Content,{})})}),(0,u.jsxs)("div",{className:`${a}_media-container`,children:[(0,u.jsxs)("div",{className:`${a}_media-wrap`,children:[e.defaultMediaUrl&&"video"===e.defaultMediaType&&(0,u.jsx)("video",{src:e.defaultMediaUrl,className:"skip-lazy"}),e.defaultMediaUrl&&"image"===e.defaultMediaType&&(0,u.jsx)("img",{src:e.defaultMediaUrl,alt:"",className:"skip-lazy"})]}),(0,u.jsx)("div",{className:`${a}_pause-btn-container`,children:(0,u.jsx)("button",{"aria-label":"Pause","aria-disabled":"false",className:`${a}_pause-btn`,children:(0,u.jsx)("span",{className:`${a}_pause-btn-wrapper`,style:"width:24px;height:24px",children:(0,u.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",role:"presentation",focusable:"false",xmlns:"http://www.w3.org/2000/svg",children:(0,u.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 19H6L6 5L10 5L10 19ZM14 19L14 5L18 5V19H14Z",fill:"#ffffffff"})})})})})]})]})}})}},a={};function t(e){var l=a[e];if(void 0!==l)return l.exports;var d=a[e]={exports:{}};return i[e](d,d.exports,t),d.exports}t.m=i,e=[],t.O=(i,a,l,d)=>{if(!a){var o=1/0;for(c=0;c<e.length;c++){for(var[a,l,d]=e[c],s=!0,r=0;r<a.length;r++)(!1&d||o>=d)&&Object.keys(t.O).every(e=>t.O[e](a[r]))?a.splice(r--,1):(s=!1,d<o&&(o=d));if(s){e.splice(c--,1);var n=l();void 0!==n&&(i=n)}}return i}d=d||0;for(var c=e.length;c>0&&e[c-1][2]>d;c--)e[c]=e[c-1];e[c]=[a,l,d]},t.n=e=>{var i=e&&e.__esModule?()=>e.default:()=>e;return t.d(i,{a:i}),i},t.d=(e,i)=>{for(var a in i)t.o(i,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:i[a]})},t.o=(e,i)=>Object.prototype.hasOwnProperty.call(e,i),(()=>{var e={433:0,557:0};t.O.j=i=>0===e[i];var i=(i,a)=>{var l,d,[o,s,r]=a,n=0;if(o.some(i=>0!==e[i])){for(l in s)t.o(s,l)&&(t.m[l]=s[l]);if(r)var c=r(t)}for(i&&i(a);n<o.length;n++)d=o[n],t.o(e,d)&&e[d]&&e[d][0](),e[d]=0;return t.O(c)},a=globalThis.webpackChunkmedia_accordion=globalThis.webpackChunkmedia_accordion||[];a.forEach(i.bind(null,0)),a.push=i.bind(null,a.push.bind(a))})();var l=t.O(void 0,[557],()=>t(648));l=t.O(l)})();