(()=>{"use strict";const t=".wp-block-srg-media-accordion",e=".wp-block-srg-media-accordion-item",i=".wp-block-srg-media-accordion-item",n=".wp-block-srg-media-accordion_media-wrap",s=".media-template",a=".wp-block-srg-media-accordion_pause-btn",r=".wp-block-srg-media-accordion_content-container",o="active",d="wp-block-srg-media-accordion-item--paused",u=5e3,c="--animation-duration",l=20,h=500,f='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" role="presentation" focusable="false" xmlns="http://www.w3.org/2000/svg"><path d="M8 20L20 12L8 4L8 20Z" fill="#ffffffff"></path></svg>',m='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" role="presentation" focusable="false" xmlns="http://www.w3.org/2000/svg"><path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z" fill="#ffffffff"></path></svg>';var p=function(){return p=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var s in e=arguments[i])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},p.apply(this,arguments)};function v(t,e,i){if(i||2===arguments.length)for(var n,s=0,a=e.length;s<a;s++)!n&&s in e||(n||(n=Array.prototype.slice.call(e,0,s)),n[s]=e[s]);return t.concat(n||Array.prototype.slice.call(e))}function g(t){return Array.prototype.slice.call(t)}function b(t,e){var i=Math.floor(t);return i===e||i+1===e?t:e}function w(){return Date.now()}function y(t,e,i){if(e="data-keen-slider-"+e,null===i)return t.removeAttribute(e);t.setAttribute(e,i||"")}function k(t,e){return e=e||document,"function"==typeof t&&(t=t(e)),Array.isArray(t)?t:"string"==typeof t?g(e.querySelectorAll(t)):t instanceof HTMLElement?[t]:t instanceof NodeList?g(t):[]}function x(t){t.raw&&(t=t.raw),t.cancelable&&!t.defaultPrevented&&t.preventDefault()}function C(t){t.raw&&(t=t.raw),t.stopPropagation&&t.stopPropagation()}function I(){var t=[];return{add:function(e,i,n,s){e.addListener?e.addListener(n):e.addEventListener(i,n,s),t.push([e,i,n,s])},input:function(t,e,i,n){this.add(t,e,function(t){return function(e){e.nativeEvent&&(e=e.nativeEvent);var i=e.changedTouches||[],n=e.targetTouches||[],s=e.detail&&e.detail.x?e.detail:null;return t({id:s?s.identifier?s.identifier:"i":n[0]?n[0]?n[0].identifier:"e":"d",idChanged:s?s.identifier?s.identifier:"i":i[0]?i[0]?i[0].identifier:"e":"d",raw:e,x:s&&s.x?s.x:n[0]?n[0].screenX:s?s.x:e.pageX,y:s&&s.y?s.y:n[0]?n[0].screenY:s?s.y:e.pageY})}}(i),n)},purge:function(){t.forEach(function(t){t[0].removeListener?t[0].removeListener(t[2]):t[0].removeEventListener(t[1],t[2],t[3])}),t=[]}}}function T(t,e,i){return Math.min(Math.max(t,e),i)}function E(t){return(t>0?1:0)-(t<0?1:0)||+t}function L(t){var e=t.getBoundingClientRect();return{height:b(e.height,t.offsetHeight),width:b(e.width,t.offsetWidth)}}function M(t,e,i,n){var s=t&&t[e];return null==s?i:n&&"function"==typeof s?s():s}function P(t){return Math.round(1e6*t)/1e6}function S(t){var e,i,n,s,a,r,o,d,u,c,l,h,f,m,p=1/0,g=[],b=null,y=0;function k(t){z(y+t)}function x(t){var e=C(y+t).abs;return S(e)?e:null}function C(t){var e=Math.floor(Math.abs(P(t/i))),n=P((t%i+i)%i);n===i&&(n=0);var s=E(t),a=o.indexOf(v([],o,!0).reduce(function(t,e){return Math.abs(e-n)<Math.abs(t-n)?e:t})),d=a;return s<0&&e++,a===r&&(d=0,e+=s>0?1:-1),{abs:d+e*r*s,origin:a,rel:d}}function I(t,e,i){var n;if(e||!V())return L(t,i);if(!S(t))return null;var s=C(null!=i?i:y),a=s.abs,o=t-s.rel,d=a+o;n=L(d);var u=L(d-r*E(o));return(null!==u&&Math.abs(u)<Math.abs(n)||null===n)&&(n=u),P(n)}function L(t,e){if(null==e&&(e=P(y)),!S(t)||null===t)return null;t=Math.round(t);var n=C(e),s=n.abs,a=n.rel,d=n.origin,u=O(t),c=(e%i+i)%i,l=o[d],h=Math.floor((t-(s-a))/r)*i;return P(l-c-l+o[u]+h+(d===r?i:0))}function S(t){return A(t)===t}function A(t){return T(t,u,c)}function V(){return s.loop}function O(t){return(t%r+r)%r}function z(e){var i;i=e-y,g.push({distance:i,timestamp:w()}),g.length>6&&(g=g.slice(-6)),y=P(e);var n=D().abs;if(n!==b){var s=null!==b;b=n,s&&t.emit("slideChanged")}}function D(o){var d=o?null:function(){if(r){var t=V(),e=t?(y%i+i)%i:y,o=(t?y%i:y)-a[0][2],d=0-(o<0&&t?i-Math.abs(o):o),p=0,v=C(y),g=v.abs,b=v.rel,w=a[b][2],k=a.map(function(e,n){var a=d+p;(a<0-e[0]||a>1)&&(a+=(Math.abs(a)>i-1&&t?i:0)*E(-a));var o=n-b,u=E(o),c=o+g;t&&(-1===u&&a>w&&(c+=r),1===u&&a<w&&(c-=r),null!==l&&c<l&&(a+=i),null!==h&&c>h&&(a-=i));var f=a+e[0]+e[1],m=Math.max(a>=0&&f<=1?1:f<0||a>1?0:a<0?Math.min(1,(e[0]+a)/e[0]):(1-a)/e[0],0);return p+=e[0]+e[1],{abs:c,distance:s.rtl?-1*a+1-e[0]:a,portion:m,size:e[0]}});return g=A(g),b=O(g),{abs:A(g),length:n,max:m,maxIdx:c,min:f,minIdx:u,position:y,progress:t?e/i:y/n,rel:b,slides:k,slidesLength:i}}}();return e.details=d,t.emit("detailsChanged"),d}return e={absToRel:O,add:k,details:null,distToIdx:x,idxToDist:I,init:function(e){if(function(){if(s=t.options,a=(s.trackConfig||[]).map(function(t){return[M(t,"size",1),M(t,"spacing",0),M(t,"origin",0)]}),r=a.length){i=P(a.reduce(function(t,e){return t+e[0]+e[1]},0));var e,u=r-1;n=P(i+a[0][2]-a[u][0]-a[u][2]-a[u][1]),o=a.reduce(function(t,i){if(!t)return[0];var n=a[t.length-1],s=t[t.length-1]+(n[0]+n[2])+n[1];return s-=i[2],t[t.length-1]>s&&(s=t[t.length-1]),s=P(s),t.push(s),(!e||e<s)&&(d=t.length-1),e=s,t},null),0===n&&(d=0),o.push(P(i))}}(),!r)return D(!0);var v;!function(){var e=t.options.range,i=t.options.loop;l=u=i?M(i,"min",-1/0):0,h=c=i?M(i,"max",p):d;var n=M(e,"min",null),s=M(e,"max",null);null!==n&&(u=n),null!==s&&(c=s),f=u===-1/0?u:t.track.idxToDist(u||0,!0,0),m=c===p?c:I(c,!0,0),null===s&&(h=c),M(e,"align",!1)&&c!==p&&0===a[O(c)][2]&&(m-=1-a[O(c)][0],c=x(m-y)),f=P(f),m=P(m)}(),v=e,Number(v)===v?k(L(A(e))):D()},to:z,velocity:function(){var t=w(),e=g.reduce(function(e,i){var n=i.distance,s=i.timestamp;return t-s>200||(E(n)!==E(e.distance)&&e.distance&&(e={distance:0,lastTimestamp:0,time:0}),e.time&&(e.distance+=n),e.lastTimestamp&&(e.time+=s-e.lastTimestamp),e.lastTimestamp=s),e},{distance:0,lastTimestamp:0,time:0});return e.distance/e.time||0}}}function A(t){var e,i,n,s,a,r,o,d;function u(t){return 2*t}function c(t){return T(t,o,d)}function l(t){return 1-Math.pow(1-t,3)}function h(){return n?t.track.velocity():0}function f(t,e){void 0===e&&(e=1e3);var i=147e-9+(t=Math.abs(t))/e;return{dist:Math.pow(t,2)/i,dur:t/i}}function m(){var e=t.track.details;e&&(a=e.min,r=e.max,o=e.minIdx,d=e.maxIdx)}function p(){t.animator.stop()}t.on("updated",m),t.on("optionsChanged",m),t.on("created",m),t.on("dragStarted",function(){n=!1,p(),e=i=t.track.details.abs}),t.on("dragChecked",function(){n=!0}),t.on("dragEnded",function(){var n=t.options.mode;"snap"===n&&function(){var n=t.track,s=t.track.details,o=s.position,d=E(h());(o>r||o<a)&&(d=0);var u=e+d;0===s.slides[n.absToRel(u)].portion&&(u-=d),e!==i&&(u=i),E(n.idxToDist(u,!0))!==d&&(u+=d),u=c(u);var l=n.idxToDist(u,!0);t.animator.start([{distance:l,duration:500,easing:function(t){return 1+--t*t*t*t*t}}])}(),"free"!==n&&"free-snap"!==n||function(){p();var e="free-snap"===t.options.mode,i=t.track,n=h();s=E(n);var o=t.track.details,d=[];if(n||!e){var m=f(n),v=m.dist,g=m.dur;if(g=u(g),v*=s,e){var b=i.idxToDist(i.distToIdx(v),!0);b&&(v=b)}d.push({distance:v,duration:g,easing:l});var w=o.position,y=w+v;if(y<a||y>r){var k=y<a?a-w:r-w,x=0,C=n;if(E(k)===s){var I=Math.min(Math.abs(k)/Math.abs(v),1),T=function(t){return 1-Math.pow(1-t,1/3)}(I)*g;d[0].earlyExit=T,C=n*(1-I)}else d[0].earlyExit=0,x+=k;var L=f(C,100),M=L.dist*s;t.options.rubberband&&(d.push({distance:M,duration:u(L.dur),easing:l}),d.push({distance:-M+x,duration:500,easing:l}))}t.animator.start(d)}else t.moveToIdx(c(o.abs),!0,{duration:500,easing:function(t){return 1+--t*t*t*t*t}})}()}),t.on("dragged",function(){i=t.track.details.abs})}function V(t){var e,i,n,s,a,r,o,d,u,c,l,h,f,m,p,v,g,b,w=I();function y(e){if(r&&d===e.id){var f=S(e);if(u){if(!P(e))return M(e);c=f,u=!1,t.emit("dragChecked")}if(v)return c=f;x(e);var m=function(e){if(g===-1/0&&b===1/0)return e;var n=t.track.details,r=n.length,o=n.position,d=T(e,g-o,b-o);if(0===r)return 0;if(!t.options.rubberband)return d;if(o<=b&&o>=g)return e;if(o<g&&i>0||o>b&&i<0)return e;var u=(o<g?o-g:o-b)/r,c=s*r,l=Math.abs(u*c),h=Math.max(0,1-l/a*2);return h*h*e}(o(c-f)/s*n);i=E(m);var p=t.track.details.position;(p>g&&p<b||p===g&&i>0||p===b&&i<0)&&C(e),l+=m,!h&&Math.abs(l*s)>5&&(h=!0),t.track.add(m),c=f,t.emit("dragged")}}function L(e){!r&&t.track.details&&t.track.details.length&&(l=0,r=!0,h=!1,u=!0,d=e.id,P(e),c=S(e),t.emit("dragStarted"))}function M(e){r&&d===e.idChanged&&(r=!1,t.emit("dragEnded"))}function P(t){var e=A(),i=e?t.y:t.x,n=e?t.x:t.y,s=void 0!==f&&void 0!==m&&Math.abs(m-n)<=Math.abs(f-i);return f=i,m=n,s}function S(t){return A()?t.y:t.x}function A(){return t.options.vertical}function V(){s=t.size,a=A()?window.innerHeight:window.innerWidth;var e=t.track.details;e&&(g=e.min,b=e.max)}function O(t){h&&(C(t),x(t))}function z(){if(w.purge(),t.options.drag&&!t.options.disabled){var i;i=t.options.dragSpeed||1,o="function"==typeof i?i:function(t){return t*i},n=t.options.rtl?-1:1,V(),e=t.container,function(){var t="data-keen-slider-clickable";k("[".concat(t,"]:not([").concat(t,"=false])"),e).map(function(t){w.add(t,"dragstart",C),w.add(t,"mousedown",C),w.add(t,"touchstart",C)})}(),w.add(e,"dragstart",function(t){x(t)}),w.add(e,"click",O,{capture:!0}),w.input(e,"ksDragStart",L),w.input(e,"ksDrag",y),w.input(e,"ksDragEnd",M),w.input(e,"mousedown",L),w.input(e,"mousemove",y),w.input(e,"mouseleave",M),w.input(e,"mouseup",M),w.input(e,"touchstart",L,{passive:!0}),w.input(e,"touchmove",y,{passive:!1}),w.input(e,"touchend",M),w.input(e,"touchcancel",M),w.add(window,"wheel",function(t){r&&x(t)});var s="data-keen-slider-scrollable";k("[".concat(s,"]:not([").concat(s,"=false])"),t.container).map(function(t){return function(t){var e;w.input(t,"touchstart",function(t){e=S(t),v=!0,p=!0},{passive:!0}),w.input(t,"touchmove",function(i){var n=A(),s=n?t.scrollHeight-t.clientHeight:t.scrollWidth-t.clientWidth,a=e-S(i),r=n?t.scrollTop:t.scrollLeft,o=n&&"scroll"===t.style.overflowY||!n&&"scroll"===t.style.overflowX;if(e=S(i),(a<0&&r>0||a>0&&r<s)&&p&&o)return v=!0;p=!1,x(i),v=!1}),w.input(t,"touchend",function(){v=!1})}(t)})}}t.on("updated",V),t.on("optionsChanged",z),t.on("created",z),t.on("destroyed",w.purge)}function O(t){var e,i,n=null;function s(e,i,n){t.animator.active?r(e,i,n):requestAnimationFrame(function(){return r(e,i,n)})}function a(){s(!1,!1,i)}function r(i,s,a){var r=0,o=t.size,c=t.track.details;if(c&&e){var l=c.slides;e.forEach(function(t,e){if(i)!n&&s&&d(t,null,a),u(t,null,a);else{if(!l[e])return;var c=l[e].size*o;!n&&s&&d(t,c,a),u(t,l[e].distance*o-r,a),r+=c}})}}function o(e){return"performance"===t.options.renderMode?Math.round(e):e}function d(t,e,i){var n=i?"height":"width";null!==e&&(e=o(e)+"px"),t.style["min-"+n]=e,t.style["max-"+n]=e}function u(t,e,i){if(null!==e){e=o(e);var n=i?e:0;e="translate3d(".concat(i?0:e,"px, ").concat(n,"px, 0)")}t.style.transform=e,t.style["-webkit-transform"]=e}function c(){e&&(r(!0,!0,i),e=null),t.on("detailsChanged",a,!0)}function l(){s(!1,!0,i)}function h(){c(),i=t.options.vertical,t.options.disabled||"custom"===t.options.renderMode||(n="auto"===M(t.options.slides,"perView",null),t.on("detailsChanged",a),(e=t.slides).length&&l())}t.on("created",h),t.on("optionsChanged",h),t.on("beforeOptionsChanged",function(){c()}),t.on("updated",l),t.on("destroyed",c)}function z(t,e){return function(i){var n,s,a,r,o,d=I();function u(t){var e;y(i.container,"reverse","rtl"!==(e=i.container,window.getComputedStyle(e,null).getPropertyValue("direction"))||t?null:""),y(i.container,"v",i.options.vertical&&!t?"":null),y(i.container,"disabled",i.options.disabled&&!t?"":null)}function c(){l()&&g()}function l(){var t=null;if(r.forEach(function(e){e.matches&&(t=e.__media)}),t===n)return!1;n||i.emit("beforeOptionsChanged"),n=t;var e=t?a.breakpoints[t]:a;return i.options=p(p({},a),e),u(),T(),E(),w(),!0}function h(t){var e=L(t);return(i.options.vertical?e.height:e.width)/i.size||1}function f(){return i.options.trackConfig.length}function m(t){for(var o in n=!1,a=p(p({},e),t),d.purge(),s=i.size,r=[],a.breakpoints||[]){var u=window.matchMedia(o);u.__media=o,r.push(u),d.add(u,"change",c)}d.add(window,"orientationchange",C),d.add(window,"resize",x),l()}function v(t){i.animator.stop();var e=i.track.details;i.track.init(null!=t?t:e?e.abs:0)}function g(t){v(t),i.emit("optionsChanged")}function b(t,e){if(t)return m(t),void g(e);T(),E();var n=f();w(),f()!==n?g(e):v(e),i.emit("updated")}function w(){var t=i.options.slides;if("function"==typeof t)return i.options.trackConfig=t(i.size,i.slides);for(var e=i.slides,n=e.length,s="number"==typeof t?t:M(t,"number",n,!0),a=[],r=M(t,"perView",1,!0),o=M(t,"spacing",0,!0)/i.size||0,d="auto"===r?o:o/r,u=M(t,"origin","auto"),c=0,l=0;l<s;l++){var f="auto"===r?h(e[l]):1/r-o+d,m="center"===u?.5-f/2:"auto"===u?0:u;a.push({origin:m,size:f,spacing:o}),c+=f}if(c+=o*(s-1),"auto"===u&&!i.options.loop&&1!==r){var p=0;a.map(function(t){var e=c-p;return p+=t.size+o,e>=1||(t.origin=1-e-(c>1?0:1-c)),t})}i.options.trackConfig=a}function x(){T();var t=i.size;i.options.disabled||t===s||(s=t,b())}function C(){x(),setTimeout(x,500),setTimeout(x,2e3)}function T(){var t=L(i.container);i.size=(i.options.vertical?t.height:t.width)||1}function E(){i.slides=k(i.options.selector,i.container)}i.container=(o=k(t,document)).length?o[0]:null,i.destroy=function(){d.purge(),i.emit("destroyed"),u(!0)},i.prev=function(){i.moveToIdx(i.track.details.abs-1,!0)},i.next=function(){i.moveToIdx(i.track.details.abs+1,!0)},i.update=b,m(i.options)}}var D=function(t,e,i){try{return function(t,e){var i,n={};return i={emit:function(t){n[t]&&n[t].forEach(function(t){t(i)});var e=i.options&&i.options[t];e&&e(i)},moveToIdx:function(t,e,n){var s=i.track.idxToDist(t,e);if(s){var a=i.options.defaultAnimation;i.animator.start([{distance:s,duration:M(n||a,"duration",500),easing:M(n||a,"easing",function(t){return 1+--t*t*t*t*t})}])}},on:function(t,e,i){void 0===i&&(i=!1),n[t]||(n[t]=[]);var s=n[t].indexOf(e);s>-1?i&&delete n[t][s]:i||n[t].push(e)},options:t},function(){if(i.track=S(i),i.animator=function(t){var e,i,n,s,a,r;function o(e){r||(r=e),d(!0);var a=e-r;a>n&&(a=n);var l=s[i];if(l[3]<a)return i++,o(e);var h=l[2],f=l[4],m=l[0],p=l[1]*(0,l[5])(0===f?1:(a-h)/f);if(p&&t.track.to(m+p),a<n)return c();r=null,d(!1),u(null),t.emit("animationEnded")}function d(t){e.active=t}function u(t){e.targetIdx=t}function c(){var t;t=o,a=window.requestAnimationFrame(t)}function l(){var e;e=a,window.cancelAnimationFrame(e),d(!1),u(null),r&&t.emit("animationStopped"),r=null}return e={active:!1,start:function(e){if(l(),t.track.details){var a=0,r=t.track.details.position;i=0,n=0,s=e.map(function(t){var e,i=Number(r),s=null!==(e=t.earlyExit)&&void 0!==e?e:t.duration,o=t.easing,d=t.distance*o(s/t.duration)||0;r+=d;var u=n;return n+=s,a+=d,[i,t.distance,u,n,t.duration,o]}),u(t.track.distToIdx(a)),c(),t.emit("animationStarted")}},stop:l,targetIdx:null}}(i),e)for(var t=0,n=e;t<n.length;t++)(0,n[t])(i);i.track.init(i.options.initial||0),i.emit("created")}(),i}(e,v([z(t,{drag:!0,mode:"snap",renderMode:"precision",rubberband:!0,selector:".keen-slider__slide"}),O,V,A],i||[],!0))}catch(t){console.error(t)}};const q={isLandscapeOrSquare:()=>window.matchMedia("(min-aspect-ratio: 1/1)").matches,debounce(t,e){let i;return function(...n){clearTimeout(i),i=setTimeout(()=>t.apply(this,n),e)}},isElementVisible(t){if(!t)return!1;const e=t.getBoundingClientRect(),i=window.getComputedStyle(t);return e.width>0&&e.height>0&&"none"!==i.display&&"hidden"!==i.visibility&&"0"!==i.opacity}};function _(t){let e,i;const n=t=>{const e=document.createElement("div");return t.split(" ").forEach(t=>e.classList.add(t)),e},s=t=>{t&&t.parentNode&&t.parentNode.removeChild(t)},a=()=>{if(!i)return;const e=t.track.details.rel;Array.from(i.children).forEach((t,i)=>{t.classList.toggle("dot--active",i===e)})},r=(a=!1)=>{((i=!1)=>{if(i){if(e){const t=e.parentNode;for(;e.firstChild;)t.insertBefore(e.firstChild,e);s(e)}}else e=n("keen-slider_navigation-wrapper"),t.container.parentNode.appendChild(e),e.appendChild(t.container)})(a),((a=!1)=>{a?s(i):(i=n("dots"),t.track.details.slides.forEach((e,s)=>{const a=n("dot");a.addEventListener("click",()=>t.moveToIdx(s)),i.appendChild(a)}),e.appendChild(i))})(a)};t.on("created",()=>{r(),a()}),t.on("optionsChanged",()=>{r(!0),r(),a()}),t.on("slideChanged",a),t.on("destroyed",()=>r(!0))}const B={observer:null,accordions:new Map,init(){this.observer||(this.observer=new IntersectionObserver(t=>{t.forEach(t=>{const e=this.accordions.get(t.target);e&&(t.isIntersecting&&q.isElementVisible(t.target)?e.onVisibilityChange(!0):e.onVisibilityChange(!1))})},{root:null,rootMargin:"0px",threshold:.1}))},register(t){this.init(),this.accordions.set(t.accordion,t),this.observer.observe(t.accordion)},unregister(t){this.observer&&this.accordions.has(t.accordion)&&(this.observer.unobserve(t.accordion),this.accordions.delete(t.accordion))},destroy(){this.observer&&(this.observer.disconnect(),this.observer=null,this.accordions.clear())}};class N{currentIndex=0;timeoutId=null;isPaused=!0;remainingTime=0;startTime=0;duration=0;slider=null;intersectionObserver=null;resizeTimeout=null;isVisible=!1;wasUserPaused=!1;hasStartedAnimation=!1;constructor(t){this.accordion=t,this.items=this.accordion.querySelectorAll(e),this.mediaContainer=this.accordion.querySelector(n),this.pauseButton=this.accordion.querySelector(a),this.contentContainer=this.accordion.querySelector(r),this.handleClick=this.handleClick.bind(this),this.handleOrientationChange=q.debounce(this.handleOrientationChange.bind(this),h);const i=this.accordion?.dataset||{};this.autoplayEnabled="false"!==i.autoplay,this.autoplayEnabled?(this.isPaused=!0,this.wasUserPaused=!1):(this.isPaused=!0,this.wasUserPaused=!0),this.init()}init(){0!==this.items.length&&(this.attachEventListeners(),this.updateActiveItem(0,!1),this.updateMediaContent(),this.updatePauseButton(),B.register(this),!q.isLandscapeOrSquare()&&q.isElementVisible(this.accordion)&&this.initSlider())}initSlider(){this.contentContainer&&!this.slider&&(q.isElementVisible(this.accordion)?(this.contentContainer.classList.add("keen-slider"),this.items.forEach(t=>t.classList.add("keen-slider__slide")),this.slider=new D(this.contentContainer,{initial:this.currentIndex,slides:{perView:1,spacing:l},slideChanged:t=>{this.showItem(t.track.details.abs,!1)}},[_])):B.register(this))}destroySlider(){this.slider&&(this.slider.destroy(),this.slider=null,this.contentContainer.classList.remove("keen-slider"),this.items.forEach(t=>t.classList.remove("keen-slider__slide")))}refreshSlider(){this.slider&&this.slider.update()}attachEventListeners(){this.accordion.addEventListener("click",this.handleClick),this.accordion.classList.contains("is-layout-2")&&this.items.forEach(t=>t.addEventListener("mouseenter",this.handleMouseEnterItem.bind(this))),window.addEventListener("orientationchange",this.handleOrientationChange),window.addEventListener("resize",this.handleOrientationChange)}handleClick(t){t.preventDefault();const e=t.target.closest(i);e?this.handleItemClick(e):t.target.closest(a)&&this.togglePause()}handleMouseEnterItem(t){const e=t.target.closest(i);e&&this.handleItemClick(e)}handleItemClick(t){const i=t.closest(e);if(!i||!q.isLandscapeOrSquare())return;const n=Array.from(this.items).indexOf(i);-1!==n&&n!==this.currentIndex&&this.showItem(n)}onVisibilityChange(t){this.isVisible=t,t?(q.isLandscapeOrSquare()||this.slider||this.initSlider(),this.wasUserPaused||this.resumeAnimation()):this.pauseAnimation()}pauseAnimation(){if(!this.isPaused){this.isPaused=!0,this.clearTimer();const t=Date.now()-this.startTime;this.remainingTime=Math.max(0,this.duration-t),this.handleVideoPlayback(),this.items[this.currentIndex]&&this.items[this.currentIndex].classList.add(d)}}resumeAnimation(){this.isPaused&&!this.wasUserPaused?(this.isPaused=!1,this.hasStartedAnimation?(this.startTime=Date.now(),this.timeoutId=setTimeout(()=>{this.showItem((this.currentIndex+1)%this.items.length)},this.remainingTime)):(this.hasStartedAnimation=!0,this.scheduleNextItem()),this.handleVideoPlayback(),this.items[this.currentIndex]&&this.items[this.currentIndex].classList.remove(d)):this.isPaused||this.wasUserPaused||0!==this.remainingTime||this.scheduleNextItem()}handleOrientationChange(){q.isLandscapeOrSquare()?this.destroySlider():!this.slider&&this.isVisible?this.initSlider():this.slider&&this.refreshSlider()}showItem(t,e=!0){t<0||t>=this.items.length||(this.clearTimer(),this.updateActiveItem(t,e),this.updateMediaContent(),this.scheduleNextItem())}updateActiveItem(t,e=!0){this.items.forEach(t=>{t.classList.remove(o,d)}),this.items[t].classList.add(o),this.isPaused&&this.items[t].classList.add(d),this.slider&&e&&this.slider.moveToIdx(t),this.currentIndex=t}updateMediaContent(){if(!this.mediaContainer)return;const t=this.items[this.currentIndex].querySelector(s);if(!t||!t.content)return;const e=t.content.cloneNode(!0),i=e.querySelector("video");i&&(i.autoplay=!this.isPaused||!this.autoplayEnabled),this.mediaContainer.innerHTML="",this.mediaContainer.appendChild(e),requestAnimationFrame(()=>{const t=this.mediaContainer.children;for(let e=0;e<t.length;e++)t[e]&&t[e].classList&&t[e].classList.add("active")})}scheduleNextItem(){!this.isPaused&&this.isVisible&&(this.duration=this.getAnimationDuration(),this.startTime=Date.now(),this.remainingTime=this.duration,this.timeoutId=setTimeout(()=>{this.showItem((this.currentIndex+1)%this.items.length)},this.duration))}getAnimationDuration(){const t=this.items[this.currentIndex],e=window.getComputedStyle(t).getPropertyValue(c);return e?e.includes("ms")?parseFloat(e):1e3*parseFloat(e):u}togglePause(){this.isPaused?this.resume():this.pause(),this.handleVideoPlayback()}handleVideoPlayback(){if(!this.mediaContainer)return;const t=this.mediaContainer.querySelector("video");t&&(this.isPaused?t.pause():t.play())}pause(){if(!this.isPaused){if(this.wasUserPaused=!0,this.isPaused=!0,this.clearTimer(),this.hasStartedAnimation){const t=Date.now()-this.startTime;this.remainingTime=Math.max(0,this.duration-t)}this.updatePauseButton(),this.items[this.currentIndex].classList.add(d),this.handleVideoPlayback()}}resume(){this.isPaused&&(this.wasUserPaused=!1,this.isPaused=!1,this.isVisible&&(this.hasStartedAnimation?(this.startTime=Date.now(),this.timeoutId=setTimeout(()=>{this.showItem((this.currentIndex+1)%this.items.length)},this.remainingTime)):(this.hasStartedAnimation=!0,this.scheduleNextItem())),this.updatePauseButton(),this.items[this.currentIndex].classList.remove(d),this.handleVideoPlayback())}updatePauseButton(){this.pauseButton&&(this.pauseButton.innerHTML=this.isPaused?f:m,this.pauseButton.setAttribute("aria-label",this.isPaused?"Resume":"Pause"))}clearTimer(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}destroy(){this.clearTimer(),this.accordion&&this.accordion.removeEventListener("click",this.handleClick),this.items.forEach(t=>t.removeEventListener("mouseenter",this.handleMouseEnterItem.bind(this))),window.removeEventListener("orientationchange",this.handleOrientationChange),window.removeEventListener("resize",this.handleOrientationChange),B.unregister(this),this.slider&&(this.slider.destroy(),this.slider=null),this.resizeTimeout&&(clearTimeout(this.resizeTimeout),this.resizeTimeout=null)}}document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(t).forEach(t=>{new N(t)})}),window.addEventListener("beforeunload",()=>{B.destroy()})})();