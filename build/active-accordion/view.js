(()=>{"use strict";var t=function(){return t=Object.assign||function(t){for(var i,e=1,n=arguments.length;e<n;e++)for(var r in i=arguments[e])Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r]);return t},t.apply(this,arguments)};function i(t,i,e){if(e||2===arguments.length)for(var n,r=0,a=i.length;r<a;r++)!n&&r in i||(n||(n=Array.prototype.slice.call(i,0,r)),n[r]=i[r]);return t.concat(n||Array.prototype.slice.call(i))}function e(t){return Array.prototype.slice.call(t)}function n(t,i){var e=Math.floor(t);return e===i||e+1===i?t:i}function r(){return Date.now()}function a(t,i,e){if(i="data-keen-slider-"+i,null===e)return t.removeAttribute(i);t.setAttribute(i,e||"")}function s(t,i){return i=i||document,"function"==typeof t&&(t=t(i)),Array.isArray(t)?t:"string"==typeof t?e(i.querySelectorAll(t)):t instanceof HTMLElement?[t]:t instanceof NodeList?e(t):[]}function o(t){t.raw&&(t=t.raw),t.cancelable&&!t.defaultPrevented&&t.preventDefault()}function d(t){t.raw&&(t=t.raw),t.stopPropagation&&t.stopPropagation()}function u(){var t=[];return{add:function(i,e,n,r){i.addListener?i.addListener(n):i.addEventListener(e,n,r),t.push([i,e,n,r])},input:function(t,i,e,n){this.add(t,i,function(t){return function(i){i.nativeEvent&&(i=i.nativeEvent);var e=i.changedTouches||[],n=i.targetTouches||[],r=i.detail&&i.detail.x?i.detail:null;return t({id:r?r.identifier?r.identifier:"i":n[0]?n[0]?n[0].identifier:"e":"d",idChanged:r?r.identifier?r.identifier:"i":e[0]?e[0]?e[0].identifier:"e":"d",raw:i,x:r&&r.x?r.x:n[0]?n[0].screenX:r?r.x:i.pageX,y:r&&r.y?r.y:n[0]?n[0].screenY:r?r.y:i.pageY})}}(e),n)},purge:function(){t.forEach(function(t){t[0].removeListener?t[0].removeListener(t[2]):t[0].removeEventListener(t[1],t[2],t[3])}),t=[]}}}function c(t,i,e){return Math.min(Math.max(t,i),e)}function l(t){return(t>0?1:0)-(t<0?1:0)||+t}function h(t){var i=t.getBoundingClientRect();return{height:n(i.height,t.offsetHeight),width:n(i.width,t.offsetWidth)}}function f(t,i,e,n){var r=t&&t[i];return null==r?e:n&&"function"==typeof r?r():r}function m(t){return Math.round(1e6*t)/1e6}function p(t){var e,n,a,s,o,d,u,h,p,v,g,b,w,y,x=1/0,k=[],C=null,T=0;function I(t){z(T+t)}function L(t){var i=M(T+t).abs;return S(i)?i:null}function M(t){var e=Math.floor(Math.abs(m(t/n))),r=m((t%n+n)%n);r===n&&(r=0);var a=l(t),s=u.indexOf(i([],u,!0).reduce(function(t,i){return Math.abs(i-r)<Math.abs(t-r)?i:t})),o=s;return a<0&&e++,s===d&&(o=0,e+=a>0?1:-1),{abs:o+e*d*a,origin:s,rel:o}}function P(t,i,e){var n;if(i||!V())return E(t,e);if(!S(t))return null;var r=M(null!=e?e:T),a=r.abs,s=t-r.rel,o=a+s;n=E(o);var u=E(o-d*l(s));return(null!==u&&Math.abs(u)<Math.abs(n)||null===n)&&(n=u),m(n)}function E(t,i){if(null==i&&(i=m(T)),!S(t)||null===t)return null;t=Math.round(t);var e=M(i),r=e.abs,a=e.rel,s=e.origin,o=O(t),c=(i%n+n)%n,l=u[s],h=Math.floor((t-(r-a))/d)*n;return m(l-c-l+u[o]+h+(s===d?n:0))}function S(t){return A(t)===t}function A(t){return c(t,p,v)}function V(){return s.loop}function O(t){return(t%d+d)%d}function z(i){var e;e=i-T,k.push({distance:e,timestamp:r()}),k.length>6&&(k=k.slice(-6)),T=m(i);var n=D().abs;if(n!==C){var a=null!==C;C=n,a&&t.emit("slideChanged")}}function D(i){var r=i?null:function(){if(d){var t=V(),i=t?(T%n+n)%n:T,e=(t?T%n:T)-o[0][2],r=0-(e<0&&t?n-Math.abs(e):e),u=0,c=M(T),h=c.abs,f=c.rel,m=o[f][2],x=o.map(function(i,e){var a=r+u;(a<0-i[0]||a>1)&&(a+=(Math.abs(a)>n-1&&t?n:0)*l(-a));var o=e-f,c=l(o),p=o+h;t&&(-1===c&&a>m&&(p+=d),1===c&&a<m&&(p-=d),null!==g&&p<g&&(a+=n),null!==b&&p>b&&(a-=n));var v=a+i[0]+i[1],w=Math.max(a>=0&&v<=1?1:v<0||a>1?0:a<0?Math.min(1,(i[0]+a)/i[0]):(1-a)/i[0],0);return u+=i[0]+i[1],{abs:p,distance:s.rtl?-1*a+1-i[0]:a,portion:w,size:i[0]}});return h=A(h),f=O(h),{abs:A(h),length:a,max:y,maxIdx:v,min:w,minIdx:p,position:T,progress:t?i/n:T/a,rel:f,slides:x,slidesLength:n}}}();return e.details=r,t.emit("detailsChanged"),r}return e={absToRel:O,add:I,details:null,distToIdx:L,idxToDist:P,init:function(i){if(function(){if(s=t.options,o=(s.trackConfig||[]).map(function(t){return[f(t,"size",1),f(t,"spacing",0),f(t,"origin",0)]}),d=o.length){n=m(o.reduce(function(t,i){return t+i[0]+i[1]},0));var i,e=d-1;a=m(n+o[0][2]-o[e][0]-o[e][2]-o[e][1]),u=o.reduce(function(t,e){if(!t)return[0];var n=o[t.length-1],r=t[t.length-1]+(n[0]+n[2])+n[1];return r-=e[2],t[t.length-1]>r&&(r=t[t.length-1]),r=m(r),t.push(r),(!i||i<r)&&(h=t.length-1),i=r,t},null),0===a&&(h=0),u.push(m(n))}}(),!d)return D(!0);var e;!function(){var i=t.options.range,e=t.options.loop;g=p=e?f(e,"min",-1/0):0,b=v=e?f(e,"max",x):h;var n=f(i,"min",null),r=f(i,"max",null);null!==n&&(p=n),null!==r&&(v=r),w=p===-1/0?p:t.track.idxToDist(p||0,!0,0),y=v===x?v:P(v,!0,0),null===r&&(b=v),f(i,"align",!1)&&v!==x&&0===o[O(v)][2]&&(y-=1-o[O(v)][0],v=L(y-T)),w=m(w),y=m(y)}(),e=i,Number(e)===e?I(E(A(i))):D()},to:z,velocity:function(){var t=r(),i=k.reduce(function(i,e){var n=e.distance,r=e.timestamp;return t-r>200||(l(n)!==l(i.distance)&&i.distance&&(i={distance:0,lastTimestamp:0,time:0}),i.time&&(i.distance+=n),i.lastTimestamp&&(i.time+=r-i.lastTimestamp),i.lastTimestamp=r),i},{distance:0,lastTimestamp:0,time:0});return i.distance/i.time||0}}}function v(t){var i,e,n,r,a,s,o,d;function u(t){return 2*t}function h(t){return c(t,o,d)}function f(t){return 1-Math.pow(1-t,3)}function m(){return n?t.track.velocity():0}function p(t,i){void 0===i&&(i=1e3);var e=147e-9+(t=Math.abs(t))/i;return{dist:Math.pow(t,2)/e,dur:t/e}}function v(){var i=t.track.details;i&&(a=i.min,s=i.max,o=i.minIdx,d=i.maxIdx)}function g(){t.animator.stop()}t.on("updated",v),t.on("optionsChanged",v),t.on("created",v),t.on("dragStarted",function(){n=!1,g(),i=e=t.track.details.abs}),t.on("dragChecked",function(){n=!0}),t.on("dragEnded",function(){var n=t.options.mode;"snap"===n&&function(){var n=t.track,r=t.track.details,o=r.position,d=l(m());(o>s||o<a)&&(d=0);var u=i+d;0===r.slides[n.absToRel(u)].portion&&(u-=d),i!==e&&(u=e),l(n.idxToDist(u,!0))!==d&&(u+=d),u=h(u);var c=n.idxToDist(u,!0);t.animator.start([{distance:c,duration:500,easing:function(t){return 1+--t*t*t*t*t}}])}(),"free"!==n&&"free-snap"!==n||function(){g();var i="free-snap"===t.options.mode,e=t.track,n=m();r=l(n);var o=t.track.details,d=[];if(n||!i){var c=p(n),v=c.dist,b=c.dur;if(b=u(b),v*=r,i){var w=e.idxToDist(e.distToIdx(v),!0);w&&(v=w)}d.push({distance:v,duration:b,easing:f});var y=o.position,x=y+v;if(x<a||x>s){var k=x<a?a-y:s-y,C=0,T=n;if(l(k)===r){var I=Math.min(Math.abs(k)/Math.abs(v),1),L=function(t){return 1-Math.pow(1-t,1/3)}(I)*b;d[0].earlyExit=L,T=n*(1-I)}else d[0].earlyExit=0,C+=k;var M=p(T,100),P=M.dist*r;t.options.rubberband&&(d.push({distance:P,duration:u(M.dur),easing:f}),d.push({distance:-P+C,duration:500,easing:f}))}t.animator.start(d)}else t.moveToIdx(h(o.abs),!0,{duration:500,easing:function(t){return 1+--t*t*t*t*t}})}()}),t.on("dragged",function(){e=t.track.details.abs})}function g(t){var i,e,n,r,a,h,f,m,p,v,g,b,w,y,x,k,C,T,I=u();function L(i){if(h&&m===i.id){var s=S(i);if(p){if(!E(i))return P(i);v=s,p=!1,t.emit("dragChecked")}if(k)return v=s;o(i);var u=function(i){if(C===-1/0&&T===1/0)return i;var n=t.track.details,s=n.length,o=n.position,d=c(i,C-o,T-o);if(0===s)return 0;if(!t.options.rubberband)return d;if(o<=T&&o>=C)return i;if(o<C&&e>0||o>T&&e<0)return i;var u=(o<C?o-C:o-T)/s,l=r*s,h=Math.abs(u*l),f=Math.max(0,1-h/a*2);return f*f*i}(f(v-s)/r*n);e=l(u);var w=t.track.details.position;(w>C&&w<T||w===C&&e>0||w===T&&e<0)&&d(i),g+=u,!b&&Math.abs(g*r)>5&&(b=!0),t.track.add(u),v=s,t.emit("dragged")}}function M(i){!h&&t.track.details&&t.track.details.length&&(g=0,h=!0,b=!1,p=!0,m=i.id,E(i),v=S(i),t.emit("dragStarted"))}function P(i){h&&m===i.idChanged&&(h=!1,t.emit("dragEnded"))}function E(t){var i=A(),e=i?t.y:t.x,n=i?t.x:t.y,r=void 0!==w&&void 0!==y&&Math.abs(y-n)<=Math.abs(w-e);return w=e,y=n,r}function S(t){return A()?t.y:t.x}function A(){return t.options.vertical}function V(){r=t.size,a=A()?window.innerHeight:window.innerWidth;var i=t.track.details;i&&(C=i.min,T=i.max)}function O(t){b&&(d(t),o(t))}function z(){if(I.purge(),t.options.drag&&!t.options.disabled){var e;e=t.options.dragSpeed||1,f="function"==typeof e?e:function(t){return t*e},n=t.options.rtl?-1:1,V(),i=t.container,function(){var t="data-keen-slider-clickable";s("[".concat(t,"]:not([").concat(t,"=false])"),i).map(function(t){I.add(t,"dragstart",d),I.add(t,"mousedown",d),I.add(t,"touchstart",d)})}(),I.add(i,"dragstart",function(t){o(t)}),I.add(i,"click",O,{capture:!0}),I.input(i,"ksDragStart",M),I.input(i,"ksDrag",L),I.input(i,"ksDragEnd",P),I.input(i,"mousedown",M),I.input(i,"mousemove",L),I.input(i,"mouseleave",P),I.input(i,"mouseup",P),I.input(i,"touchstart",M,{passive:!0}),I.input(i,"touchmove",L,{passive:!1}),I.input(i,"touchend",P),I.input(i,"touchcancel",P),I.add(window,"wheel",function(t){h&&o(t)});var r="data-keen-slider-scrollable";s("[".concat(r,"]:not([").concat(r,"=false])"),t.container).map(function(t){return function(t){var i;I.input(t,"touchstart",function(t){i=S(t),k=!0,x=!0},{passive:!0}),I.input(t,"touchmove",function(e){var n=A(),r=n?t.scrollHeight-t.clientHeight:t.scrollWidth-t.clientWidth,a=i-S(e),s=n?t.scrollTop:t.scrollLeft,d=n&&"scroll"===t.style.overflowY||!n&&"scroll"===t.style.overflowX;if(i=S(e),(a<0&&s>0||a>0&&s<r)&&x&&d)return k=!0;x=!1,o(e),k=!1}),I.input(t,"touchend",function(){k=!1})}(t)})}}t.on("updated",V),t.on("optionsChanged",z),t.on("created",z),t.on("destroyed",I.purge)}function b(t){var i,e,n=null;function r(i,e,n){t.animator.active?s(i,e,n):requestAnimationFrame(function(){return s(i,e,n)})}function a(){r(!1,!1,e)}function s(e,r,a){var s=0,o=t.size,c=t.track.details;if(c&&i){var l=c.slides;i.forEach(function(t,i){if(e)!n&&r&&d(t,null,a),u(t,null,a);else{if(!l[i])return;var c=l[i].size*o;!n&&r&&d(t,c,a),u(t,l[i].distance*o-s,a),s+=c}})}}function o(i){return"performance"===t.options.renderMode?Math.round(i):i}function d(t,i,e){var n=e?"height":"width";null!==i&&(i=o(i)+"px"),t.style["min-"+n]=i,t.style["max-"+n]=i}function u(t,i,e){if(null!==i){i=o(i);var n=e?i:0;i="translate3d(".concat(e?0:i,"px, ").concat(n,"px, 0)")}t.style.transform=i,t.style["-webkit-transform"]=i}function c(){i&&(s(!0,!0,e),i=null),t.on("detailsChanged",a,!0)}function l(){r(!1,!0,e)}function h(){c(),e=t.options.vertical,t.options.disabled||"custom"===t.options.renderMode||(n="auto"===f(t.options.slides,"perView",null),t.on("detailsChanged",a),(i=t.slides).length&&l())}t.on("created",h),t.on("optionsChanged",h),t.on("beforeOptionsChanged",function(){c()}),t.on("updated",l),t.on("destroyed",c)}function w(i,e){return function(n){var r,o,d,c,l,m=u();function p(t){var i;a(n.container,"reverse","rtl"!==(i=n.container,window.getComputedStyle(i,null).getPropertyValue("direction"))||t?null:""),a(n.container,"v",n.options.vertical&&!t?"":null),a(n.container,"disabled",n.options.disabled&&!t?"":null)}function v(){g()&&k()}function g(){var i=null;if(c.forEach(function(t){t.matches&&(i=t.__media)}),i===r)return!1;r||n.emit("beforeOptionsChanged"),r=i;var e=i?d.breakpoints[i]:d;return n.options=t(t({},d),e),p(),M(),P(),T(),!0}function b(t){var i=h(t);return(n.options.vertical?i.height:i.width)/n.size||1}function w(){return n.options.trackConfig.length}function y(i){for(var a in r=!1,d=t(t({},e),i),m.purge(),o=n.size,c=[],d.breakpoints||[]){var s=window.matchMedia(a);s.__media=a,c.push(s),m.add(s,"change",v)}m.add(window,"orientationchange",L),m.add(window,"resize",I),g()}function x(t){n.animator.stop();var i=n.track.details;n.track.init(null!=t?t:i?i.abs:0)}function k(t){x(t),n.emit("optionsChanged")}function C(t,i){if(t)return y(t),void k(i);M(),P();var e=w();T(),w()!==e?k(i):x(i),n.emit("updated")}function T(){var t=n.options.slides;if("function"==typeof t)return n.options.trackConfig=t(n.size,n.slides);for(var i=n.slides,e=i.length,r="number"==typeof t?t:f(t,"number",e,!0),a=[],s=f(t,"perView",1,!0),o=f(t,"spacing",0,!0)/n.size||0,d="auto"===s?o:o/s,u=f(t,"origin","auto"),c=0,l=0;l<r;l++){var h="auto"===s?b(i[l]):1/s-o+d,m="center"===u?.5-h/2:"auto"===u?0:u;a.push({origin:m,size:h,spacing:o}),c+=h}if(c+=o*(r-1),"auto"===u&&!n.options.loop&&1!==s){var p=0;a.map(function(t){var i=c-p;return p+=t.size+o,i>=1||(t.origin=1-i-(c>1?0:1-c)),t})}n.options.trackConfig=a}function I(){M();var t=n.size;n.options.disabled||t===o||(o=t,C())}function L(){I(),setTimeout(I,500),setTimeout(I,2e3)}function M(){var t=h(n.container);n.size=(n.options.vertical?t.height:t.width)||1}function P(){n.slides=s(n.options.selector,n.container)}n.container=(l=s(i,document)).length?l[0]:null,n.destroy=function(){m.purge(),n.emit("destroyed"),p(!0)},n.prev=function(){n.moveToIdx(n.track.details.abs-1,!0)},n.next=function(){n.moveToIdx(n.track.details.abs+1,!0)},n.update=C,y(n.options)}}var y=function(t,e,n){try{return function(t,i){var e,n={};return e={emit:function(t){n[t]&&n[t].forEach(function(t){t(e)});var i=e.options&&e.options[t];i&&i(e)},moveToIdx:function(t,i,n){var r=e.track.idxToDist(t,i);if(r){var a=e.options.defaultAnimation;e.animator.start([{distance:r,duration:f(n||a,"duration",500),easing:f(n||a,"easing",function(t){return 1+--t*t*t*t*t})}])}},on:function(t,i,e){void 0===e&&(e=!1),n[t]||(n[t]=[]);var r=n[t].indexOf(i);r>-1?e&&delete n[t][r]:e||n[t].push(i)},options:t},function(){if(e.track=p(e),e.animator=function(t){var i,e,n,r,a,s;function o(i){s||(s=i),d(!0);var a=i-s;a>n&&(a=n);var l=r[e];if(l[3]<a)return e++,o(i);var h=l[2],f=l[4],m=l[0],p=l[1]*(0,l[5])(0===f?1:(a-h)/f);if(p&&t.track.to(m+p),a<n)return c();s=null,d(!1),u(null),t.emit("animationEnded")}function d(t){i.active=t}function u(t){i.targetIdx=t}function c(){var t;t=o,a=window.requestAnimationFrame(t)}function l(){var i;i=a,window.cancelAnimationFrame(i),d(!1),u(null),s&&t.emit("animationStopped"),s=null}return i={active:!1,start:function(i){if(l(),t.track.details){var a=0,s=t.track.details.position;e=0,n=0,r=i.map(function(t){var i,e=Number(s),r=null!==(i=t.earlyExit)&&void 0!==i?i:t.duration,o=t.easing,d=t.distance*o(r/t.duration)||0;s+=d;var u=n;return n+=r,a+=d,[e,t.distance,u,n,t.duration,o]}),u(t.track.distToIdx(a)),c(),t.emit("animationStarted")}},stop:l,targetIdx:null}}(e),i)for(var t=0,n=i;t<n.length;t++)(0,n[t])(e);e.track.init(e.options.initial||0),e.emit("created")}(),e}(e,i([w(t,{drag:!0,mode:"snap",renderMode:"precision",rubberband:!0,selector:".keen-slider__slide"}),b,g,v],n||[],!0))}catch(t){console.error(t)}};const x=".wp-block-srg-media-accordion",k=".wp-block-srg-media-accordion-item",C=".wp-block-srg-media-accordion-item_header-button",T=".wp-block-srg-media-accordion_media-wrap",I=".media-template",L=".wp-block-srg-media-accordion_pause-btn",M=".wp-block-srg-media-accordion_content-container",P="active",E="wp-block-srg-media-accordion-item--paused",S=5e3,A="--animation-duration",V=20,O=500,z='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" role="presentation" focusable="false" xmlns="http://www.w3.org/2000/svg"><path d="M8 20L20 12L8 4L8 20Z" fill="#ffffffff"></path></svg>',D='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" role="presentation" focusable="false" xmlns="http://www.w3.org/2000/svg"><path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z" fill="#ffffffff"></path></svg>',q={isLandscapeOrSquare:()=>window.matchMedia("(min-aspect-ratio: 1/1)").matches,debounce(t,i){let e;return function(...n){clearTimeout(e),e=setTimeout(()=>t.apply(this,n),i)}},isElementVisible(t){if(!t)return!1;const i=t.getBoundingClientRect(),e=window.getComputedStyle(t);return i.width>0&&i.height>0&&"none"!==e.display&&"hidden"!==e.visibility&&"0"!==e.opacity}};function _(t){let i,e;const n=t=>{const i=document.createElement("div");return t.split(" ").forEach(t=>i.classList.add(t)),i},r=t=>{t&&t.parentNode&&t.parentNode.removeChild(t)},a=()=>{if(!e)return;const i=t.track.details.rel;Array.from(e.children).forEach((t,e)=>{t.classList.toggle("dot--active",e===i)})},s=(a=!1)=>{((e=!1)=>{if(e){if(i){const t=i.parentNode;for(;i.firstChild;)t.insertBefore(i.firstChild,i);r(i)}}else i=n("keen-slider_navigation-wrapper"),t.container.parentNode.appendChild(i),i.appendChild(t.container)})(a),((a=!1)=>{a?r(e):(e=n("dots"),t.track.details.slides.forEach((i,r)=>{const a=n("dot");a.addEventListener("click",()=>t.moveToIdx(r)),e.appendChild(a)}),i.appendChild(e))})(a)};t.on("created",()=>{s(),a()}),t.on("optionsChanged",()=>{s(!0),s(),a()}),t.on("slideChanged",a),t.on("destroyed",()=>s(!0))}const N={observer:null,accordions:new Map,init(){this.observer||(this.observer=new IntersectionObserver(t=>{t.forEach(t=>{const i=this.accordions.get(t.target);i&&(t.isIntersecting&&q.isElementVisible(t.target)?i.onVisibilityChange(!0):i.onVisibilityChange(!1))})},{root:null,rootMargin:"0px",threshold:.1}))},register(t){this.init(),this.accordions.set(t.accordion,t),this.observer.observe(t.accordion)},unregister(t){this.observer&&this.accordions.has(t.accordion)&&(this.observer.unobserve(t.accordion),this.accordions.delete(t.accordion))},destroy(){this.observer&&(this.observer.disconnect(),this.observer=null,this.accordions.clear())}};class B{currentIndex=0;timeoutId=null;isPaused=!0;remainingTime=0;startTime=0;duration=0;slider=null;intersectionObserver=null;resizeTimeout=null;isVisible=!1;wasUserPaused=!1;hasStartedAnimation=!1;constructor(t){this.accordion=t,this.items=this.accordion.querySelectorAll(k),this.mediaContainer=this.accordion.querySelector(T),this.pauseButton=this.accordion.querySelector(L),this.contentContainer=this.accordion.querySelector(M),this.handleClick=this.handleClick.bind(this),this.handleOrientationChange=q.debounce(this.handleOrientationChange.bind(this),O),this.init()}init(){0!==this.items.length&&(this.attachEventListeners(),this.updateActiveItem(0,!1),this.updateMediaContent(),N.register(this),!q.isLandscapeOrSquare()&&q.isElementVisible(this.accordion)&&this.initSlider())}initSlider(){this.contentContainer&&!this.slider&&(q.isElementVisible(this.accordion)?(this.contentContainer.classList.add("keen-slider"),this.items.forEach(t=>t.classList.add("keen-slider__slide")),this.slider=new y(this.contentContainer,{initial:this.currentIndex,slides:{perView:1,spacing:V},slideChanged:t=>{this.showItem(t.track.details.abs,!1)}},[_])):N.register(this))}destroySlider(){this.slider&&(this.slider.destroy(),this.slider=null,this.contentContainer.classList.remove("keen-slider"),this.items.forEach(t=>t.classList.remove("keen-slider__slide")))}refreshSlider(){this.slider&&this.slider.update()}attachEventListeners(){this.accordion.addEventListener("click",this.handleClick),window.addEventListener("orientationchange",this.handleOrientationChange),window.addEventListener("resize",this.handleOrientationChange)}handleClick(t){t.preventDefault();const i=t.target.closest(C);i?this.handleItemClick(i):t.target.closest(L)&&this.togglePause()}handleItemClick(t){const i=t.closest(k);if(!i||!q.isLandscapeOrSquare())return;const e=Array.from(this.items).indexOf(i);-1!==e&&e!==this.currentIndex&&this.showItem(e)}onVisibilityChange(t){this.isVisible=t,t?(q.isLandscapeOrSquare()||this.slider||this.initSlider(),this.wasUserPaused||this.resumeAnimation()):this.pauseAnimation()}pauseAnimation(){if(!this.isPaused){this.isPaused=!0,this.clearTimer();const t=Date.now()-this.startTime;this.remainingTime=Math.max(0,this.duration-t),this.handleVideoPlayback(),this.items[this.currentIndex]&&this.items[this.currentIndex].classList.add(E)}}resumeAnimation(){this.isPaused&&!this.wasUserPaused?(this.isPaused=!1,this.hasStartedAnimation?(this.startTime=Date.now(),this.timeoutId=setTimeout(()=>{this.showItem((this.currentIndex+1)%this.items.length)},this.remainingTime)):(this.hasStartedAnimation=!0,this.scheduleNextItem()),this.handleVideoPlayback(),this.items[this.currentIndex]&&this.items[this.currentIndex].classList.remove(E)):this.isPaused||this.wasUserPaused||0!==this.remainingTime||this.scheduleNextItem()}handleOrientationChange(){q.isLandscapeOrSquare()?this.destroySlider():!this.slider&&this.isVisible?this.initSlider():this.slider&&this.refreshSlider()}showItem(t,i=!0){t<0||t>=this.items.length||(this.clearTimer(),this.updateActiveItem(t,i),this.updateMediaContent(),this.scheduleNextItem())}updateActiveItem(t,i=!0){this.items.forEach(t=>{t.classList.remove(P,E)}),this.items[t].classList.add(P),this.isPaused&&this.items[t].classList.add(E),this.slider&&i&&this.slider.moveToIdx(t),this.currentIndex=t}updateMediaContent(){if(!this.mediaContainer)return;const t=this.items[this.currentIndex].querySelector(I);if(!t||!t.content)return;const i=t.content.cloneNode(!0),e=i.querySelector("video");e&&(e.autoplay=!this.isPaused),this.mediaContainer.innerHTML="",this.mediaContainer.appendChild(i),requestAnimationFrame(()=>{const t=this.mediaContainer.children;for(let i=0;i<t.length;i++)t[i]&&t[i].classList&&t[i].classList.add("active")})}scheduleNextItem(){!this.isPaused&&this.isVisible&&(this.duration=this.getAnimationDuration(),this.startTime=Date.now(),this.remainingTime=this.duration,this.timeoutId=setTimeout(()=>{this.showItem((this.currentIndex+1)%this.items.length)},this.duration))}getAnimationDuration(){const t=this.items[this.currentIndex],i=window.getComputedStyle(t).getPropertyValue(A);return i?i.includes("ms")?parseFloat(i):1e3*parseFloat(i):S}togglePause(){this.isPaused?this.resume():this.pause(),this.handleVideoPlayback()}handleVideoPlayback(){if(!this.mediaContainer)return;const t=this.mediaContainer.querySelector("video");t&&(this.isPaused?t.pause():t.play())}pause(){if(!this.isPaused){if(this.wasUserPaused=!0,this.isPaused=!0,this.clearTimer(),this.hasStartedAnimation){const t=Date.now()-this.startTime;this.remainingTime=Math.max(0,this.duration-t)}this.updatePauseButton(),this.items[this.currentIndex].classList.add(E),this.handleVideoPlayback()}}resume(){this.isPaused&&(this.wasUserPaused=!1,this.isPaused=!1,this.isVisible&&(this.hasStartedAnimation?(this.startTime=Date.now(),this.timeoutId=setTimeout(()=>{this.showItem((this.currentIndex+1)%this.items.length)},this.remainingTime)):(this.hasStartedAnimation=!0,this.scheduleNextItem())),this.updatePauseButton(),this.items[this.currentIndex].classList.remove(E),this.handleVideoPlayback())}updatePauseButton(){this.pauseButton&&(this.pauseButton.innerHTML=this.isPaused?z:D,this.pauseButton.setAttribute("aria-label",this.isPaused?"Resume":"Pause"))}clearTimer(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}destroy(){this.clearTimer(),this.accordion&&this.accordion.removeEventListener("click",this.handleClick),window.removeEventListener("orientationchange",this.handleOrientationChange),window.removeEventListener("resize",this.handleOrientationChange),N.unregister(this),this.slider&&(this.slider.destroy(),this.slider=null),this.resizeTimeout&&(clearTimeout(this.resizeTimeout),this.resizeTimeout=null)}}document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(x).forEach(t=>{new B(t)})}),window.addEventListener("beforeunload",()=>{N.destroy()})})();